"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const c=require("./globalThis.cjs"),r=require("./isFunction.cjs"),n=require("./isObject.cjs");require("./toRawType.cjs");require("./toTypeString.cjs");require("./objectToString.cjs");require("./decapitalize.cjs");const u={delay:1e3,decrement:1,autostart:!0,end:0};class s{value;intervalId;options;callbackQueues={};constructor(t){r.isFunction(t.change)&&this.on("change",t.change),this.options=Object.assign({...u},t),this.value=this.options.value,this.options.autostart&&this.start()}static create(t,i){const e={};return typeof t=="number"?e.value=t:n.isObject(t)&&Object.assign(e,t),r.isFunction(i)?e.change=i:n.isObject(i)&&Object.assign(e,i),new s(e)}on(t,i){const e=this.callbackQueues[t]??[];e.push(i),this.callbackQueues[t]=e}trigger(t){const i=this.callbackQueues[t];Array.isArray(i)&&i.forEach(e=>e.call(this,this.value))}start(){this.options.value>this.value||(this.loop(),this.trigger("start"))}stop(){this.intervalId!==0&&(this.clear(),this.trigger("stop"))}continue(){this.intervalId===0&&(this.loop(),this.trigger("continue"))}decrease(){this.value=this.value-this.options.decrement,this.value<=this.options.end&&(clearInterval(this.intervalId),this.trigger("finish")),this.trigger("change")}loop(){this.clear(),this.intervalId=c.default.setInterval(this.decrease.bind(this),this.options.delay)}clear(){clearInterval(this.intervalId),this.intervalId=0}}const a=s.create;exports.countdown=a;exports.default=a;
