!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("storm",[],e):"object"==typeof exports?exports.storm=e():t.storm=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=78)}({10:function(t,e,n){"use strict";n.r(e),n.d(e,"hasOwnProperty",(function(){return r}));var r=Object.prototype.hasOwnProperty;e.default=r},13:function(t,e,n){"use strict";n.r(e),n.d(e,"isFunction",(function(){return r}));var r=function(t){return"function"==typeof t};e.default=r},2:function(t,e,n){"use strict";n.r(e),n.d(e,"isObject",(function(){return r}));var r=function(t){return null!==t&&"object"==typeof t};e.default=r},25:function(t,e,n){"use strict";n.r(e),n.d(e,"load",(function(){return i}));var r=n(13),o=n(2),u=n(9),i=function(t,e,n){return n=Object.assign({before:null,mode:"src",attrs:null},n),new Promise((function(i,a){var c=document.createElement(t),f=document.body;c[n.mode]=e;var l=n.attrs;if(Object(o.default)(l))for(var s in l)Object(u.default)(l,s)&&c.setAttribute(s,l[s]);c.onload=function(){i(c),f.removeChild(c)},c.onerror=function(){a(c),f.removeChild(c)},Object(r.default)(n.before)&&n.before(),f.appendChild(c)}))};e.default=i},76:function(t,e,n){"use strict";n.r(e),n.d(e,"file2base64",(function(){return r}));var r=function(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=n,r.readAsDataURL(t)}))};e.default=r},78:function(t,e,n){"use strict";n.r(e),n.d(e,"file2img",(function(){return a})),n.d(e,"createCanvas",(function(){return c})),n.d(e,"calcDrawSize",(function(){return f})),n.d(e,"canvas2file",(function(){return l}));var r=n(76),o=n(25),u=function(t,e,n,r){return new(n||(n=Promise))((function(o,u){function i(t){try{c(r.next(t))}catch(t){u(t)}}function a(t){try{c(r.throw(t))}catch(t){u(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,a)}c((r=r.apply(t,e||[])).next())}))},i=function(t,e){var n,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},a=function(t){return u(void 0,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,Object(r.default)(t)];case 1:return e=n.sent(),[4,(u=e,Object(o.default)("img",u))];case 2:return[2,n.sent()]}var u}))}))},c=function(t,e){return new Promise((function(t){var n=document.createElement("canvas"),r=n.getContext("2d");r.fillStyle=e.fillStyle,r.fillRect(0,0,n.width,n.height),t({context:r,$canvas:n})}))},f=function(t,e){var n=t.naturalWidth/t.naturalHeight,r=0,o=0,u=t.naturalWidth,i=t.naturalHeight;return n>=1?o=(r=e.maxWidth>0&&t.naturalWidth>e.maxWidth?e.maxWidth:t.naturalWidth)/n:r=(o=e.maxHeight>0&&t.naturalHeight>e.maxHeight?e.maxHeight:t.naturalHeight)*n,{dw:r,dh:o,dx:0,dy:0,sx:0,sy:0,sw:u,sh:i}},l=function(t,e,n){return new Promise((function(r){t.toBlob((function(t){r(new File([t],e.name,{type:e.type}))}),e.type,n.quality)}))};e.default=function(t,e){return u(void 0,void 0,void 0,(function(){var n,r,o,u,s,d,p,h,b,y,v,m,w,x;return i(this,(function(i){switch(i.label){case 0:return e=Object.assign({noCompressIfLarger:!0,maxWidth:1024,maxHeight:1024,fillStyle:"rgba(255, 255, 255, 0)",quality:.75},e),[4,a(t)];case 1:return n=i.sent(),[4,f(n,e)];case 2:return r=i.sent(),o=r.dw,u=r.dh,s=r.dx,d=r.dy,p=r.sx,h=r.sy,b=r.sw,y=r.sh,[4,c(n,e)];case 3:return v=i.sent(),m=v.context,(w=v.$canvas).width=o,w.height=u,m.drawImage(n,p,h,b,y,s,d,o,u),[4,l(w,t,e)];case 4:return x=i.sent(),e.noCompressIfLarger&&t.size<=x.size?[2,t]:[2,x]}}))}))}},9:function(t,e,n){"use strict";n.r(e),n.d(e,"hasOwn",(function(){return o}));var r=n(10),o=function(t,e){return null!=t&&r.default.call(t,e)};e.default=o}})}));