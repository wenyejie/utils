"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const T=require("./isPromise.cjs"),f=require("./normalizeOptions.cjs"),O={retry:5,base:2,failureReturn:null,check:r=>r?.error?!1:r},_={number:"retry",function:"check"},i=(r,n)=>{const{retry:c,base:u,failureReturn:l,check:a}=f.normalizeOptions(n,_,O),{resolve:m,promise:R}=Promise.withResolvers();let y=0,t=0,o=0;const s=async()=>{let e=r();if(T.isPromise(e))try{e=await e}catch{e=l}a(e)||t>=c?(clearTimeout(y),m(e)):(o=Math.pow(u,t)-.5,setTimeout(s,o*1e3),t++)};return s(),R};exports.default=i;exports.retryIncorrect=i;
